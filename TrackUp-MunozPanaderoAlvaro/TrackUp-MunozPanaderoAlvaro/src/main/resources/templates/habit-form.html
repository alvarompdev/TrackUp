<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8" />
    <title th:text="${isEdit ? 'Editar Hábito' : 'Nuevo Hábito'}">Formulario de Hábito</title>
    <link rel="stylesheet" th:href="@{/css/forms.css}" />
</head>
<body>
<div class="form-container">
    <h2 th:text="${isEdit ? 'Editar Hábito' : 'Nuevo Hábito'}">Nuevo Hábito</h2>
    <form th:action="@{/habits/save}" th:object="${habit}" method="post">
        <!-- ID oculto -->
        <input type="hidden" th:field="*{id}" />
        <!-- UserID oculto -->
        <input type="hidden" th:field="*{userId}" />

        <!-- Nombre -->
        <label for="name">Nombre:</label>
        <input id="name" type="text" th:field="*{name}" required />

        <!-- Descripción -->
        <label for="description">Descripción:</label>
        <textarea id="description" th:field="*{description}" rows="4"></textarea>

        <!-- Frecuencia -->
        <label for="frequency">Frecuencia:</label>
        <input id="frequency" type="text" th:field="*{frequency}"
               required placeholder="Ej: Diario, Semanal, Mensual" />

        <!-- Fecha Inicio -->
        <label for="startDate">Fecha de Inicio:</label>
        <input id="startDate" type="date" th:field="*{startDate}" required />

        <!-- Fecha Fin -->
        <label for="endDate">Fecha de Fin (opcional):</label>
        <input id="endDate" type="date" th:field="*{endDate}" />

        <!-- Select Tipo de Hábito -->
        <label for="habitTypeId">Tipo de Hábito:</label>
        <select id="habitTypeId" th:field="*{habitTypeId}" required>
            <option value="" disabled th:if="${!isEdit}" selected>-- Selecciona un tipo --</option>
            <option th:each="type : ${habitTypes}"
                    th:value="${type.id}"
                    th:text="${type.name}">
            </option>
        </select>

        <!-- Botones -->
        <div class="button-group">
            <a th:href="@{/habits/user/{userId}(userId=${userId})}" class="btn btn-cancel">Cancelar</a>
            <button type="submit" class="btn btn-primary"
                    th:text="${isEdit ? 'Actualizar' : 'Crear'}">
                Guardar
            </button>
        </div>
    </form>
</div>
</body>
</html>